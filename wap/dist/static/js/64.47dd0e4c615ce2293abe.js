webpackJsonp([64],{OQAo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Dd8w"),n=a.n(r),o=a("//Fk"),c=a.n(o),u=a("mvHQ"),l=a.n(u),i=a("OT9B"),s=a("1CjK"),d=a("3r8y"),f=a("Gtft"),p=a("6D10"),v={name:"contract-data",extends:d.a,created:function(){var e=this;this.$nextTick(function(){e.params=e.$route.params;var t=e.params;t&&t.id&&(e.id=t.id),e.getPage({})})},data:function(){return{initData:null,params:this.$route.params,id:"",form:{type:"add",data:[]}}},activated:function(){f.a.setRight()},methods:{isEdit:function(){return this.initData!==l()(this.form)},onBtnClick:function(){var e=this,t=[];this.$refs.va.forEach(function(e){e.rules&&!Object(p.j)(e)&&t.push(e.changeV())}),c.a.all(t).then(function(t){t.every(function(e){return e})&&(console.log(e.form,"校验成功并提交数据"),e.$RouteUtil.contractUpload(n()({},e.params,{data:e.form,clueId:e.id})))})},getPage:function(e){var t=this;console.log(e);var a=this.menu,r=a.orderType,n=a.clueAdditionalConfiguration,o=a.clueIntentionType,c=a.clueShoppingWay,u=a.gender,d=a.customerOrigin,f=a.customerType;Object(i.j)().then(function(a){console.log(a,"=========================>success2");var i=[];a.forEach(function(e){console.log(e),"contact-add"===e.code&&"add"===t.form.type&&(i=e.fields),"contact-edit"===e.code&&"edit"===t.form.type&&(i=e.fields)}),i.sort(function(e,t){return e.sort-t.sort}),t.allData=i,console.log(i,"=========================>data2");var p=[];p=i.filter(function(e){return"step1"===e.description});var v=[];p.forEach(function(a){var l={attr:a.attr,type:s.a[a.configsObj.type],title:a.name,text:null,value:null,placeholder:a.configsObj.placeholder,indent:!0,columnWidth:a.columnWidth,selData:{source:[{key:"选项一",value:1},{key:"选项二",value:2}],selectedKey:"下单客户1"}};if(e[l.attr]){if(l.value=e[l.attr],l.text=e[l.attr],"gender"===l.attr&&(l.text=u[e[l.attr].code]&&u[e[l.attr].code].name,l.value=e[l.attr].code),"vehicleModelId"===l.attr&&(l.text=e[l.attr].carName,l.value=e[l.attr].vehicleModelId,getModelDetail(e[l.attr].vehicleModelId).then(function(e){return t.onCarModel({data:e})}).catch(function(e){return console.log(e)})),"appearance"===l.attr&&(l.text=JSON.parse(e[l.attr])&&JSON.parse(e[l.attr]).name,l.value=e[l.attr]?tranformColorsComponent(JSON.parse(e[l.attr])):null),"interior"===l.attr&&(l.text=JSON.parse(e[l.attr]).colors&&JSON.parse(e[l.attr]).colors[0].name,l.value=e[l.attr]?tranformColorsComponent(JSON.parse(e[l.attr])):null),"shoppingWay"===l.attr&&(l.text=e[l.attr].name,l.value=e[l.attr].code),"contractUrl"===l.attr){var i=l.value||[];l.value=i.map(function(e){return{url:e}})}if("certificateUrl"===l.attr){var p=l.value||[];l.value=p.map(function(e){return{url:e}})}if("depositVoucherUrl"===l.attr){var m=l.value||[];l.value=m.map(function(e){return{url:e}})}}var h=a.rulesObj[0]&&a.rulesObj[0].value,y={};a.rulesObj.length>0&&a.rulesObj.forEach(function(e){"required"===e.type?y[e.type]=e.value:"pattern"===e.type&&(y[e.value]=!0)});var g=y;switch(h&&(l.required=h),g&&(l.rules=g),a.attr){case"vehicleModelId":l.selData.source=n.map(function(e){return{key:e.name,value:e.code}});break;case"intentionType":case"intentionGrade":l.selData.source=o.map(function(e){return{key:e.name,value:e.code}});break;case"shoppingWay":l.selData.source=c.map(function(e){return{key:e.name,value:e.code}});break;case"appearance":case"interior":l.selData=null;break;case"gender":l.selData.source=u.map(function(e){return{key:e.name,value:e.code}});break;case"origin":l.selData.source=d.map(function(e){return{key:e.name,value:e.code}});break;case"type":l.selData.source=f.map(function(e){return{key:e.name,value:e.code}});break;case"orderType":l.selData.source=r.map(function(e){return{key:e.name,value:e.code}})}v.push(l)}),t.form.data=v,console.log(t.form.data,"----------\x3e>>>>>>>>>"),t.initData=l()(t.form)}).catch(function(e){console.log(e,"==============================>err")})}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container app-init"},[a("div",{staticClass:"input-box2"},[a("cube-scroll",[e._l(e.form.data,function(t,r){return[a("yi-input",e._b({key:r,ref:"va",refInFor:!0,attrs:{value:t.value,indent:!0},on:{"update:value":function(a){e.$set(t,"value",a)}},model:{value:t.text,callback:function(a){e.$set(t,"text",a)},expression:"item.text"}},"yi-input",t,!1))]})],2)],1),e._v(" "),a("yi-btn-box",{attrs:{name:"下一步"},on:{onBtnClick:e.onBtnClick}})],1)},staticRenderFns:[]};var h=a("VU/8")(v,m,!1,function(e){a("k7pK")},"data-v-33aaf7f4",null);t.default=h.exports},k7pK:function(e,t){}});
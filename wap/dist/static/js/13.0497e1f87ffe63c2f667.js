webpackJsonp([13],{"+6SB":function(t,e,s){"use strict";var a=s("mvHQ"),i=s.n(a),r={name:"index",props:{moduleName:{type:String,required:!0},placeholder:{type:String,default:"搜索姓名/手机/备注名称"}},data:function(){return{searchList:[],searchText:""}},computed:{isArrayEmpty:function(){return 0===this.searchList.length},isValueEmpty:function(){return!this.searchText.trim()}},methods:{handleClear:function(){this.searchList=[],localStorage.removeItem("LOCAL_SEARCH_KEY"+this.moduleName)},keydown:function(t){13===t.keyCode&&this.search(this.searchText)},search:function(t){var e=t.trim();if(e){var s=this.getHistory(),a=s.findIndex(function(t){return e===t});-1!==a&&s.splice(a,1),s.unshift(e),localStorage.setItem("LOCAL_SEARCH_KEY"+this.moduleName,i()(s)),this.searchList=this.getHistory(),this.searchText="",this.$emit("search",e)}},getHistory:function(){var t=localStorage.getItem("LOCAL_SEARCH_KEY"+this.moduleName);return t?JSON.parse(t):[]},handleSearchClick:function(){this.isValueEmpty?this.$router.back():this.search(this.searchText)}},mounted:function(){this.searchList=this.getHistory()}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("yi-container",[s("div",{staticClass:"container"},[s("div",{staticClass:"flex-center"},[s("div",{staticClass:"search-bar"},[s("img",{staticClass:"search-icon",attrs:{src:t.$images.all.small_search}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],ref:"input",staticClass:"search-input",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.searchText},on:{keydown:t.keydown,input:function(e){e.target.composing||(t.searchText=e.target.value)}}})]),t._v(" "),s("yi-touch",{staticClass:"search-button",class:{search:!t.isValueEmpty},on:{click:t.handleSearchClick}},[t._v("\n        "+t._s(t.isValueEmpty?"取消":"搜索")+"\n      ")])],1),t._v(" "),s("div",{staticClass:"flex-center margin"},[s("div",{staticClass:"title"},[t._v("历史搜索")]),t._v(" "),s("yi-touch",{staticClass:"flex-center touch-opacity",on:{click:t.handleClear}},[s("img",{staticClass:"icon",attrs:{src:t.$images.filter.small_del}}),t._v(" "),s("div",{staticClass:"button-text"},[t._v("清空")])])],1),t._v(" "),t.isArrayEmpty?s("div",{staticClass:"empty-contain"},[s("img",{staticClass:"empty-icon",attrs:{src:t.$images.base.img_seach}}),t._v(" "),s("div",{staticClass:"empty-text"},[t._v("暂无历史搜索记录")])]):s("div",{staticClass:"search-history"},t._l(t.searchList,function(e,a){return s("yi-touch",{key:a,staticClass:"search-item",on:{click:function(s){t.search(e)}}},[t._v("\n        "+t._s(e)+"\n      ")])}))])])},staticRenderFns:[]};var n=s("VU/8")(r,c,!1,function(t){s("BPoO")},"data-v-839dd360",null);e.a=n.exports},"4xUs":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Dd8w"),i=s.n(a),r=s("+6SB"),c=s("OPJW"),n=s("Gtft"),o={name:"CommonSearch",extends:c.a,components:{Search:r.a},data:function(){return{moduleName:this.$route.params.module,placeholder:this.$route.params.placeholder}},methods:{search:function(t){this.$RouteUtil.commonSearchResult(i()({},this.params,{key:t}))}},activated:function(){n.a.setRight()}},l={render:function(){var t=this.$createElement;return(this._self._c||t)("search",{attrs:{moduleName:this.moduleName,placeholder:this.placeholder},on:{search:this.search}})},staticRenderFns:[]};var h=s("VU/8")(o,l,!1,function(t){s("o24p")},"data-v-60426b18",null);e.default=h.exports},BPoO:function(t,e){},o24p:function(t,e){}});
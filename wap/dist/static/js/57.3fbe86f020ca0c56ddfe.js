webpackJsonp([57],{chRL:function(t,e){},mFdP:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("Dd8w"),n=a.n(o),r=a("bOdI"),i=a.n(r),l=a("//Fk"),s=a.n(l),c=a("3r8y"),d=a("Gtft"),u={name:"order-add",extends:c.a,created:function(){this.$nextTick(function(){})},activated:function(){d.a.setRight()},data:function(){return{params:null,clueId:"",id:"",form:{type:"add",info:[{attr:"name",type:"text",title:"客户名称",text:null,placeholder:"请选择客户名称1",rules:{required:!0},required:!1,indent:!1,disable:!0},{attr:"mobile",type:"text",title:"联系电话",text:null,placeholder:"客户联系电话",rules:{required:!0},required:!1,indent:!1,disable:!0},{attr:"gender",type:"text",title:"性别",text:null,placeholder:"请选择性别",rules:{required:!0},required:!1,indent:!1,disable:!0}],data:[]}}},methods:{onBtnClick:function(){var t=this;console.log(this.form);var e=this.$refs.va.map(function(t){return t.changeV()});s.a.all(e).then(function(e){console.log("新建线索2",t.$refs.va);var a=e.every(function(t){return t});if(console.log(a),a)if(console.log(t.form,"校验成功并提交数据"),"add"===t.form.type){t.params.data5=t.form.data,console.log(t.params,"4444");var o=t.params,r=[];o.data3 instanceof Array&&(r=r.concat(o.data3)),o.data4 instanceof Array&&(r=r.concat(o.data4)),o.data5 instanceof Array&&(r=r.concat(o.data5)),console.log(r);var l=r.filter(function(t){return"group"!==t.attr&&"files"!==t.attr}).map(function(t){return i()({},t.attr,t.value||t.text)}),s={};l.forEach(function(t){for(var e in t)s[e]=t[e]}),addOrderInfo(s).then(function(e){t.$RouteUtil.orderAddSuccess({name:"新建订单",customerNo:e.customerNo||"FJQZLS18030701S",id:e&&e[0]}),console.log(e,"--------01---------")}).catch(function(t){console.log(t,"--------02---------")})}else if("edit"===t.form.type){var c={};t.form.data.forEach(function(t){if("group"!==t.attr){var e="";e=t.value?t.value:0===t.value?0:t.text,console.log(e,"item"),"appearance"===t.attr&&(e=tranformColorsApi(e,"outerColors")),"interior"===t.attr&&(e=tranformColorsApi(e,"innerColors")),c[t.attr]=e,"vehicleModelId"===t.attr&&(c.carName=t.text)}}),console.log(t.form.data,"==>edit info"),console.log(c,"==>edit info"),editOrderInfo(n()({orderId:t.id},c)).then(function(t){return console.log(t,"==>edit success")}).catch(function(t){return console.log(t,"==>edit err")})}})},onGetName:function(t){this.$refs.va.forEach(function(e){console.log(e),"name"===e.$attrs.attr&&e.setText(t)})},onCarModel:function(t){var e=this;console.log(t,"data");var a=t.data.innerColors,o=t.data.outerColors;this.form.data.forEach(function(t,n){"appearance"===t.attr&&(e.form.data[n].selData=a?{colorList:tranformColors(a)}:{selKey:1,colorList:[{name:"无",colors:{size:1,color:["",""]}}]}),"interior"===t.attr&&(e.form.data[n].selData=o?{colorList:tranformColors(o)}:{selKey:1,colorList:[{name:"无",colors:{size:1,color:["",""]}}]})})}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"input-box2"},[a("cube-scroll",[a("div",{staticClass:"content"},[t._l(t.form.data,function(e,o){return["customerId"===e.attr?a("div",{key:"index"+o,staticClass:"id-box"},t._l(t.form.info,function(e,o){return a("div",{key:"index2"+o,staticClass:"in-box",class:{self:50===e.columnWidth}},[a("yi-input",t._b({ref:"info",refInFor:!0,attrs:{value:e.value,indent:!1,selData:e.selData||null,clearMR:50===e.columnWidth,disable:!0},on:{"update:value":function(a){t.$set(e,"value",a)}},model:{value:e.text,callback:function(a){t.$set(e,"text",a)},expression:"item1.text"}},"yi-input",e,!1))],1)})):"groupHeader"===e.type?a("div",{key:"index"+o,staticClass:"section-title section-margin-top"},[t._v("\n            "+t._s(e.title)+"\n          ")]):a("div",{key:"index"+o,staticClass:"in-box",class:{self:50===e.columnWidth}},[a("yi-input",t._b({ref:e.rules.required?"va":null,refInFor:!0,attrs:{value:e.value,indent:!1,selData:e.selData||null,clearMR:50===e.columnWidth},on:{"update:value":function(a){t.$set(e,"value",a)},onCarModel:t.onCarModel,onGetName:t.onGetName},model:{value:e.text,callback:function(a){t.$set(e,"text",a)},expression:"item.text"}},"yi-input",e,!1))],1)]}),t._v(" "),a("div",{staticClass:"space-box"})],2)])],1),t._v(" "),a("yi-btn-box",{attrs:{name:"创建订单"},on:{onBtnClick:t.onBtnClick}})],1)},staticRenderFns:[]};var m=a("VU/8")(u,f,!1,function(t){a("chRL")},"data-v-57584ed1",null);e.default=m.exports}});
webpackJsonp([9],{"2oPH":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("Dd8w"),o=i.n(r),a=i("lRRR"),n=i("Gtft"),s=i("z7xf"),l={name:"CommonSearchList",extends:i("OPJW").a,components:{SearchList:a.a},data:function(){return{module:this.$route.params.module,type:this.$route.params.type,condition:this.$route.params.condition,searchText:"",totalText:""}},methods:{refreshData:function(){this.$refs.list.refreshData()},fetchData:function(e){var t=this.params,i=t.type,r=t.module;return e.condition=o()({},this.condition,e.condition),Object(s.a)(this.module,this.type,"fetchData")(o()({},e,{type:i,module:r}))},onItemClick:function(e,t){var i=this.params,r=i.type,o=i.module,a=i.choose,n=i.onSuccess,l=i.needBack;if(a)return n&&n(e),void(l&&this.$router.go(-1));Object(s.a)(this.module,this.type,"onItemClick")({id:e.id,module:o,type:r,item:e,instance:this,cell:t})},searchClick:function(){this.$RouteUtil.commonSearch(o()({},this.params,{placeholder:this.searchText}))}},computed:{filterArray:function(){return Object(s.a)(this.module,this.type,"filterArray")}},mounted:function(){this.searchText=Object(s.a)(this.module,this.type,"searchText"),this.totalText=Object(s.a)(this.module,this.type,"totalText")},activated:function(){this.params.choose?n.a.setTitle({title:Object(s.a)(this.module,this.type,"chooseTitle")}):n.a.setTitle({title:Object(s.a)(this.module,this.type,"title")}),n.a.setRight(Object(s.a)(this.module,this.type,"rightTitleParams")(this))}},c={render:function(){var e=this.$createElement;return(this._self._c||e)("search-list",{ref:"list",attrs:{filterArray:this.filterArray,"fetch-data":this.fetchData,totalText:this.totalText,searchText:this.searchText},on:{searchClick:this.searchClick,onItemClick:this.onItemClick}})},staticRenderFns:[]},u=i("VU/8")(l,c,!1,null,null,null);t.default=u.exports},"9amP":function(e,t){},Gfol:function(e,t){},Kz1T:function(e,t){},PE5V:function(e,t){},"c/v/":function(e,t){},lRRR:function(e,t,i){"use strict";var r=i("Xxa5"),o=i.n(r),a=i("exGp"),n=i.n(a),s=i("1J8U"),l={name:"ClientCell",mixins:[s.a],computed:{labels:function(){var e=[];return e.push(this.item.origin),e.push(this.item.type),"sea"!==this.$route.params.type&&this.item.followUpStatus&&e.push(this.item.followUpStatus),this.item.hasFollow&&e.push({id:"follow",name:"重点客户",support:!0}),e}}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("yi-touch",{staticClass:"cell-contain touch-highlight box-shadow",class:{"box-shadow":e.hasShadow},on:{click:e.handleClick}},[i("div",{staticClass:"cell-item first star-right"},[i("span",{staticClass:"cell-name"},[e._v(e._s(e.item.name||"无"))]),e._v(" "),i("yi-star",{attrs:{disabled:!0,value:e.item.level.code}})],1),e._v(" "),i("div",{staticClass:"cell-item second"},[i("span",[e._v("负责人:"+e._s(e.item.responsible?e.item.responsible.name:"无"))]),e._v(" "),i("span",[e._v("客户编号:"+e._s(e.item.customerNo))])]),e._v(" "),i("div",{staticClass:"cell-item third"},[i("span",[e._v(e._s(e.showTimeText))])]),e._v(" "),i("div",{staticClass:"line"}),e._v(" "),i("div",{staticClass:"cell-label-contain"},[e._l(e.labels,function(t,r){return i("div",{key:r,staticClass:"cell-label",class:{"cell-label-support":t.support}},[e._v("\n      "+e._s(t.name)+"\n    ")])}),e._v(" "),e.item.responsible?e._e():i("yi-touch",{staticClass:"btn",attrs:{type:"highLight","underlay-color":"#307ECF"},on:{click:function(t){e.$emit("obtainClick",{item:e.item,index:e.index})}}},[e._v("\n      捞取\n    ")])],2)])},staticRenderFns:[]};var u=i("VU/8")(l,c,!1,function(e){i("Kz1T")},"data-v-fca8ca7e",null).exports,m=i("6+t6"),d=i("FOjm"),h={name:"EnquiryCell",mixins:[s.a],data:function(){return{module:this.$route.params.module}},computed:{no:function(){switch(this.module){case"enquiryPrices":return this.item.enquiryNo;case"quotedPrices":return this.item.quotedNo;default:return this.item.enquiryNo}},tagColor:function(){switch(this.item.status.code){case 0:return"#FBA839";case 1:return"#7EC685";case 2:case 3:return"#EF465B";default:return"#FBA839"}}}},p={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("yi-touch",{staticClass:"cell-contain touch-highlight box-shadow",class:{"box-shadow":e.hasShadow},on:{click:e.handleClick}},[i("div",{staticClass:"top"},[i("span",{staticClass:"tag",style:{backgroundColor:e.tagColor}},[e._v(e._s(e.item.status.name))]),e._v(" "),i("span",[e._v("归属门店："+e._s(e.item.belongStore||"无"))])]),e._v(" "),i("div",{staticClass:"cell-title"},[e._v(e._s(e.item.vehicleModel||"无"))]),e._v(" "),i("div",{staticClass:"middle"},[i("span",[e._v("归属省份："+e._s(e.item.belongPlace||"无"))]),e._v(" "),i("span",[e._v(e._s(e.no))])]),e._v(" "),i("div",{staticClass:"line"}),e._v(" "),i("div",{staticClass:"bottom"},[i("span",[e._v("询价人："+e._s(e.item.enquiryName||"无"))]),e._v(" "),i("span",[e._v(e._s(e.showTimeText))])])])},staticRenderFns:[]};var f=i("VU/8")(h,p,!1,function(e){i("c/v/")},"data-v-761d4ad3",null).exports,T=i("6JT5"),v={name:"FollowUpRecordCell",mixins:[s.a],computed:{labels:function(){var e=[];return e.push(this.item.way),this.item.isImportant&&e.push({code:this.item.followId,name:this.getTargetText(this.type),support:!0}),e},showCarName:function(){return"clue"===this.type},responiableName:function(){return this.item.operatorName}},methods:{resetShow:function(){this.$refs.more.resetShow()},getTargetText:function(e){switch(e){case"clue":return"重点线索";case"customer":return"重点客户 ";case"agent":return"重点经纪人 ";default:return"重点用户"}}}},C={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("yi-touch",{staticClass:"cell-contain touch-highlight box-shadow",class:{"box-shadow":e.hasShadow},on:{click:e.handleClick}},["customer"!==e.type?i("img",{staticClass:"level-icon",attrs:{src:e.getLevelIcon(e.item.targetLevel?e.item.targetLevel.name:"")}}):e._e(),e._v(" "),i("div",{staticClass:"cell-item first"},[i("span",{staticClass:"cell-name"},[e._v(e._s(e.item.targetName||"无"))]),e._v(" "),"customer"===e.type?i("yi-star",{attrs:{disabled:!0,value:parseInt(e.item.targetLevel.code)}}):e._e()],1),e._v(" "),i("div",{staticClass:"cell-item second"},[i("span",[e._v("执行人:"+e._s(e.responiableName||"无"))]),e._v(" "),e.showCarName?e._e():i("span",[e._v("备注名称:"+e._s(e.item.targetNickname||"无"))])]),e._v(" "),e.showCarName?i("div",{staticClass:"cell-item second ellipsis",staticStyle:{"text-align":"left"}},[i("span",[e._v("车型信息:"+e._s(e.item.carName||"无"))])]):e._e(),e._v(" "),i("div",{staticClass:"mix-column"},[i("div",{staticClass:"cell-label-contain"},e._l(e.labels,function(t,r){return i("div",{key:r,staticClass:"cell-label",class:{"cell-label-support":t.support}},[e._v("\n        "+e._s(t.name)+"\n      ")])})),e._v(" "),i("span",[e._v("跟进时间:"+e._s(e.removeSecond(e.item.executionTime,"yyyy-MM-dd hh:mm")||"无"))])]),e._v(" "),i("div",{staticClass:"line"}),e._v(" "),i("yi-more-text",{ref:"more",staticClass:"content",attrs:{length:39,content:"跟进内容:"+(e.item.record||"无")}})],1)},staticRenderFns:[]};var y=i("VU/8")(v,C,!1,function(e){i("9amP")},"data-v-6ebd0b78",null).exports,_={name:"QuotedRecordCell",mixins:[s.a],data:function(){return{module:this.$route.params.module}},computed:{no:function(){switch(this.module){case"enquiryPrices":return this.item.enquiryNo;case"quotedPrices":return this.item.quotedNo;default:return this.item.enquiryNo}}}},g={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("yi-touch",{staticClass:"cell-contain touch-highlight box-shadow",class:{"box-shadow":e.hasShadow},on:{click:e.handleClick}},[i("div",{staticClass:"cell-title top"},[e._v(e._s(e.item.vehicleModel||"无"))]),e._v(" "),i("div",{staticClass:"middle"},[i("yi-image",{staticClass:"icon",attrs:{src:e.$images.base.ic_eq_price}}),e._v(" "),i("span",[e._v("报价单："+e._s(e.item.quotedNo))])],1),e._v(" "),i("div",{staticClass:"line"}),e._v(" "),i("div",{staticClass:"bottom"},[i("span",[e._v("询价单："+e._s(e.item.enquiryNo))]),e._v(" "),i("span",[e._v(e._s(e.showTimeText))])])])},staticRenderFns:[]};var x=i("VU/8")(_,g,!1,function(e){i("PE5V")},"data-v-5c7f5ae7",null).exports,b=i("zo6m"),w=i("t5DY"),S=i("I9E5"),k={name:"SearchList",components:{FilterList:b.a,ClientCell:u,AgentCell:m.a,ClueCell:d.a,FollowUpRecordCell:y,OrderCell:T.a,EnquiryCell:f,QuotedRecordCell:x},props:{fetchData:Function,hideSearchBar:Boolean,searchText:String,totalText:String,filterArray:Array},data:function(){return{showLoading:!0,module:this.$route.params.module,showError:!0,errorMessage:"",barTop:"0px",totalNumber:0,sort:""}},methods:{refreshData:function(){this.$refs.list.refreshData()},mFetchData:function(e){var t=this;return n()(o.a.mark(function i(){var r;return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,t.sort=e.orders&&e.orders[0]&&e.orders[0].name,e.loading=!t.showLoading,i.next=5,t.fetchData(e);case 5:return r=i.sent,t.totalNumber=r.totalElements,i.abrupt("return",r);case 10:throw i.prev=10,i.t0=i.catch(0),i.t0;case 13:case"end":return i.stop()}},i,t,[[0,10]])}))()},onValueChange:function(e){this.$emit("onValueChange",e)},handleSearchClick:function(){this.$emit("searchClick")},handleObtainClick:function(e){var t=this,i=e.item;return n()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.v)({id:i.id,module:t.module});case 2:t.refreshData(),S.a.showToast({txt:"捞取成功",type:"correct"});case 4:case"end":return e.stop()}},e,t)}))()},handleItemClick:function(e,t){console.log(e,t)}}},A={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("FilterList",{ref:"list",attrs:{"fetch-data":e.mFetchData,filterArray:e.filterArray},on:{valueChange:e.onValueChange},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.item,o=t.index;return["customers"===e.module?i("ClientCell",{attrs:{item:r,sort:e.sort,index:o},on:{obtainClick:e.handleObtainClick,onItemClick:function(t){return e.$emit("onItemClick",t)}}}):e._e(),e._v(" "),"agents"===e.module?i("AgentCell",{attrs:{item:r,sort:e.sort,index:o},on:{obtainClick:e.handleObtainClick,onItemClick:function(t){return e.$emit("onItemClick",t)}}}):e._e(),e._v(" "),"clues"===e.module?i("ClueCell",{attrs:{item:r,sort:e.sort},on:{onItemClick:function(t){return e.$emit("onItemClick",t)}}}):e._e(),e._v(" "),"followUpRecords"===e.module?i("FollowUpRecordCell",{attrs:{item:r,sort:e.sort},on:{onItemClick:function(t,i){return e.$emit("onItemClick",t,i)}}}):e._e(),e._v(" "),"order"===e.module?i("OrderCell",{attrs:{item:r,sort:e.sort},on:{onItemClick:function(t){return e.$emit("onItemClick",t)}}}):e._e(),e._v(" "),"enquiryPrices"===e.module?i("EnquiryCell",{attrs:{item:r,sort:e.sort},on:{onItemClick:function(t){return e.$emit("onItemClick",t)}}}):e._e(),e._v(" "),"quotedPrices"===e.module?i("EnquiryCell",{attrs:{item:r,sort:e.sort},on:{onItemClick:function(t){return e.$emit("onItemClick",t)}}}):e._e(),e._v(" "),"quotedRecords"===e.module?i("QuotedRecordCell",{attrs:{item:r,sort:e.sort},on:{onItemClick:function(t){return e.$emit("onItemClick",t)}}}):e._e(),e._v(" "),"delivery"===e.module?i("OrderCell",{attrs:{item:r,sort:e.sort},on:{onItemClick:function(t){return e.$emit("onItemClick",t)}}}):e._e()]}}])},[e.hideSearchBar?e._e():i("div",{attrs:{slot:"header"},slot:"header"},[i("yi-search-bar",{attrs:{text:e.searchText},on:{click:e.handleSearchClick}})],1),e._v(" "),i("div",{attrs:{slot:"header-bottom"},slot:"header-bottom"},[i("div",{staticStyle:{height:"9px","background-color":"#F3F3F3"}}),e._v(" "),i("div",{staticClass:"header-text"},[e._v("共 "),i("span",{staticClass:"header-text-number"},[e._v(e._s(e.totalNumber))]),e._v(" "+e._s(e.totalText))])])])},staticRenderFns:[]};var I=i("VU/8")(k,A,!1,function(e){i("Gfol")},"data-v-167bfbec",null);t.a=I.exports},z7xf:function(e,t,i){"use strict";var r=i("laDb"),o=i("t5DY"),a={rightTitleParams:function(e){return{auth:"wap-crm-clue-add",text:"新建",onSuccess:function(){r.a.clueAdd({BACK_ACTION:{path:e.ROUTE_PATH},onSuccess:function(){e.refreshData()}})}}},chooseTitle:"选择线索",totalText:"条线索",searchText:"搜索姓名/手机/备注名称/线索编号",all:{title:"全部线索",filterArray:["sort","clueIntentionGrade",["clueStatus","clueOrigin","onLineClue","clueStore","groundPromotion","toStoreClue","clueType","lastFollowUpTime","nextFollowUpTime","clueCreateTime","clueObtainTime","clueResponsible","isActivity","clueTeamwork"]]},follow:{rightTitleParams:function(){return{}},title:"重点线索",filterArray:["sort","clueIntentionGrade",["clueStatus","clueOrigin","onLineClue","toStoreClue","clueType","lastFollowUpTime","nextFollowUpTime","clueCreateTime","clueObtainTime","clueResponsible","isActivity","clueTeamwork"]]},sea:{rightTitleParams:function(){return{}},title:"线索公海",filterArray:[["clueOrigin","onLineClue","clueType","isActivity","clueCreateTime"]]},invalid:{rightTitleParams:function(){return{}},title:"无效线索",filterArray:["clueFailSort","clueIntentionGrade",["clueOrigin","onLineClue","toStoreClue","clueType","lastFollowUpTime","clueFailTime","clueCreateTime","clueResponsible","isActivity","clueTeamwork"]]}},n={rightTitleParams:function(e){return{auth:"wap-crm-customer-add",text:"新建",onSuccess:function(){r.a.clientAdd({params:e.params,BACK_ACTION:{path:e.ROUTE_PATH}})}}},chooseTitle:"选择客户",totalText:"名客户",searchText:"搜索姓名/手机/备注名称/客户编号",filterArray:["sort","customerLevel",["customerOrigin","customerType","lastFollowUpTime","nextFollowUpTime","customerCreateTime","customerObtainTime","customerResponsible","customerTeamwork"]],all:{title:"全部客户",filterArray:["sort","customerLevel",["customerOrigin","customerType","lastFollowUpTime","nextFollowUpTime","customerCreateTime","customerObtainTime","customerResponsible","customerTeamwork"]]},follow:{rightTitleParams:function(){return{}},title:"重点客户",filterArray:["sort","customerLevel",["customerOrigin","customerType","lastFollowUpTime","nextFollowUpTime","customerCreateTime","customerObtainTime","customerResponsible","customerTeamwork"]]},sea:{rightTitleParams:function(){return{}},title:"客户公海",filterArray:[["customerOrigin","customerType","customerCreateTime"]]}},s={rightTitleParams:function(e){return{text:"新建",auth:"wap-inquiry-add",onSuccess:function(){r.a.commonInquiry({BACK_ACTION:{path:e.ROUTE_PATH},id:e.userId,module:e.module,params:e.allData,type:"add",onSuccess:function(){console.log("==>inquiry add success"),e.refreshData()}})}}},title:"询价单",onItemClick:function(e){var t=e.id,i=e.module,o=e.type;return r.a.commonDetail({id:t,module:i,type:o})},chooseTitle:"选择询价单",totalText:"条询价单",searchText:"搜索车型名称/订单编号",filterArray:["enquirySort",["enquiryStatus","acceptStatus","isQuoted","clueStatusByEnquriy","clueLevel","store","enquiryCreateTime","enquiryBelongPlaceId","enquiryArea","enquiryUpdateTime","quotedTime","clueShoppingWay"]]},l={rightTitleParams:function(e){return{text:"新建",onSuccess:function(){r.a.commonFollowUp({onSuccess:function(){e.refreshData()}})}}},fetchData:o.m,chooseTitle:"选择跟进记录",totalText:"条记录",searchText:"搜索姓名/手机/备注名称",onItemClick:function(e){return e.cell.resetShow()},customer:{title:"客户跟进记录",searchText:"搜索姓名/手机/备注名称/客户编号",rightTitleParams:function(e){return{text:"新建",onSuccess:function(){r.a.commonFollowUp({module:"customers",onSuccess:function(){e.refreshData()}})}}},filterArray:["customerLevel",["responsible"]]},clue:{title:"线索跟进记录",searchText:"搜索姓名/手机/备注名称/线索编号",rightTitleParams:function(e){return{text:"新建",auth:"wap-crm-clue-followRecord-add",onSuccess:function(){r.a.commonFollowUp({module:"clues",onSuccess:function(){e.refreshData()}})}}},filterArray:["clueIntentionGrade",["responsible"]]},agent:{title:"经纪人跟进记录",auth:"wap-crm-agent-followRecord-add",searchText:"搜索姓名/手机/备注名称/经纪人编号",rightTitleParams:function(e){return{text:"新建",onSuccess:function(){r.a.commonFollowUp({module:"agents",onSuccess:function(){e.refreshData()}})}}},filterArray:["agentLevel",["responsible"]]}},c=i("Dd8w"),u=i.n(c),m=i("Gtft"),d={rightTitleParams:function(e){return{text:"新建",onSuccess:function(){m.a.actionSheet({title:"选择",cancelButton:"取消",otherButtons:["直接创建","选择线索"],onSuccess:function(t){console.log(t,"---");var i=t.buttonIndex||t.value;switch(0===t.buttonIndex&&(i=0),console.log(i,"---"),i){case 0:console.log("直接创建"),r.a.orderAddOne(u()({},e.$route.params,{BACK_ACTION:{path:e.ROUTE_PATH}}));break;case 1:console.log("选取线索"),e.$RouteUtil.searchList({module:"clues",type:"all",needBack:!1,choose:!0,condition:{fastScreening:["1"],status:[1,3]},onSuccess:function(t){r.a.orderAddOne(u()({},e.params,{BACK_ACTION:{path:e.ROUTE_PATH},clueInfo:t}))}})}}})}}},title:"合同",chooseTitle:"选择合同订单",totalText:"条合同订单",searchText:"搜索姓名/手机/备注名称",filterArray:["orderSort",["orderType","orderContractStatus","orderBelongPlaceId","orderBelongStoreId","orderCreateTime","orderResponsible","orderTeamwork"]]},h={rightTitleParams:function(){return{}},title:"报价单",onItemClick:function(e){var t=e.id,i=e.module,o=e.type;return r.a.commonDetail({id:t,module:i,type:o})},chooseTitle:"选择报价单",totalText:"条报价单",searchText:"搜索车型名称/询价人姓名/单据编号",filterArray:["enquirySort",["enquiryStatus","acceptStatus","isQuoted","clueStatusByEnquriy","clueLevel","responsibleArea","store","enquiryCreateTime","enquiryBelongPlaceId","enquiryArea","enquiryUpdateTime","quotedTime","clueShoppingWay"]]},p={rightTitleParams:function(){return{}},title:"报价记录",onItemClick:function(e){var t=e.item,i=e.module,o=e.type;return r.a.offerDetail(u()({},t,{module:i,type:o}))},chooseTitle:"选择报价记录",totalText:"条报价记录",searchText:"搜索车型名称/询价人姓名/报价人姓名",filterArray:["quotedRecordsSort",["acceptStatus","clueStatusByEnquriy","clueLevel","store","enquiryCreateTime","enquiryBelongPlaceId","enquiryArea","enquiryUpdateTime","quotedTime","clueShoppingWay","invoiceType","insuranceType"]]},f={rightTitleParams:function(e){return{text:"新建",onSuccess:function(){m.a.actionSheet({title:"选择",cancelButton:"取消",otherButtons:["直接创建","选择线索"],onSuccess:function(t){console.log(t,"---");var i=t.buttonIndex||t.value;switch(0===t.buttonIndex&&(i=0),console.log(i,"---"),i){case 0:console.log("直接创建"),r.a.orderAddOne(u()({},e.$route.params,{BACK_ACTION:{path:e.ROUTE_PATH}}));break;case 1:console.log("选取线索"),e.$RouteUtil.searchList({module:"clues",type:"all",needBack:!1,choose:!0,condition:{fastScreening:["1"],status:[1,3]},onSuccess:function(t){r.a.orderAddOne(u()({},e.params,{BACK_ACTION:{path:e.ROUTE_PATH},clueInfo:t}))}})}}})}}},title:"交车单",chooseTitle:"选择交车单",totalText:"条交车单",searchText:"搜索姓名/手机/备注名称",filterArray:["orderSort",["orderType","orderContractStatus","orderBelongPlaceId","orderBelongStoreId","orderCreateTime","orderResponsible","orderTeamwork"]]};i.d(t,"a",function(){return T});var T=function(e,t,i){return v[e][t]&&v[e][t][i]||v[e][i]||v[i]},v={fetchData:o.u,onItemClick:function(e){var t=e.id,i=e.module,o=e.type,a=e.instance;return r.a.commonDetail({id:t,module:i,type:o,onSuccess:function(){return a.refreshData()}})},customers:n,agents:{rightTitleParams:function(){return{}},totalText:"名经纪人",searchText:"搜索姓名/手机/备注名称/经纪人编号",chooseTitle:"选择经纪人",all:{title:"全部经纪人",filterArray:["agentSort","agentLevel",["agentFollowUpStatus","onLineAgent","agentType","lastFollowUpTime","nextFollowUpTime","agentObtainTime","agentCreateTime","agentResponsible","agentTeamwork"]]},follow:{title:"重点经纪人",filterArray:["agentSort","agentLevel",["agentFollowUpStatus","onLineAgent","agentType","lastFollowUpTime","nextFollowUpTime","agentObtainTime","agentCreateTime","agentResponsible","agentTeamwork"]]},sea:{title:"经纪人公海",filterArray:[["agentOrigin","onLineAgent","agentType","agentCreateTime"]]}},clues:a,followUpRecords:l,order:d,enquiryPrices:s,quotedPrices:h,quotedRecords:p,delivery:f}}});
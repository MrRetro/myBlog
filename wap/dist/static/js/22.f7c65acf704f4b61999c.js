webpackJsonp([22],{"1Cjx":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Xxa5"),n=a.n(r),s=a("exGp"),o=a.n(s),c=a("Dd8w"),i=a.n(c),l=a("//Fk"),u=a.n(l),d=a("mvHQ"),m=a.n(d),f=a("rMyF"),v=a("1CjK"),p=a("3r8y"),g=a("Gtft"),b=a("N6PA"),h=a("D2Ra"),x=a("6D10"),y={name:"edit-card",props:{avatar:String,name:String,career:String,mobile:String,email:String,department:String}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-box"},[a("p",{staticClass:"p-left"},[t.avatar?a("img",{staticClass:"img",attrs:{src:t.avatar,alt:"img"}}):a("span",{staticClass:"img-name"},[t._v(t._s(t.name.substring(0,1)))])]),t._v(" "),a("div",{staticClass:"info-box"},[a("div",{staticClass:"name-box"},[a("p",{staticClass:"name"},[t._v(t._s(t.name))]),t._v(" "),a("p",{staticClass:"career"},[a("img",{staticClass:"img",attrs:{src:t.$images.all.ico_career,alt:"img"}}),t._v("\n        "+t._s(t.career)+"\n      ")])]),t._v(" "),a("div",{staticClass:"word-box"},[a("p",{staticClass:"name"},[t._v("电话：")]),t._v(" "),a("p",{staticClass:"value"},[t._v(t._s(t.mobile))])]),t._v(" "),a("div",{staticClass:"word-box"},[a("p",{staticClass:"name"},[t._v("邮箱：")]),t._v(" "),a("p",{staticClass:"value"},[t._v(t._s(t.email))])]),t._v(" "),a("div",{staticClass:"word-box"},[a("p",{staticClass:"name"},[t._v("部门：")]),t._v(" "),a("p",{staticClass:"value"},[t._v(t._s(t.department))])])])])},staticRenderFns:[]};var k={name:"client-edit",components:{Card:a("VU/8")(y,_,!1,function(t){a("YFpM")},"data-v-921f5c54",null).exports},extends:p.a,created:function(){var t=this;this.$nextTick(function(){t.params=t.$route.params;var e=t.params;e&&e.id?(t.id=e.id,t.form.type="edit"):t.form.type="add","add"===t.form.type?t.getPage({}):Object(f.h)(t.id).then(function(e){t.getPage(e)}).catch(function(t){console.log(t)})})},activated:function(){g.a.setRight()},data:function(){return{initData:null,more:!1,form:{type:"add",data:[],more:{data:[]}},cardId:""}},computed:{form2:function(){var t=this.form;return t.more&&t.more.data?t.more.data:null}},methods:{isEdit:function(){return this.initData!==m()(this.form)},onBtnClick:function(){var t=this,e=[];console.log("---------------------========================"),console.log(this.$refs.va),this.$refs.va.forEach(function(t){t.rules&&!Object(x.j)(t)&&e.push(t.changeV())}),console.log(e,"--------"),u.a.all(e).then(function(e){if(e.every(function(t){return t})){console.log(t.form,"校验成功并提交数据");var a={};t.form.data.forEach(function(t){var e="";e=t.value?t.value:0===t.value?0:t.text,a[t.attr]=e}),console.log(a);var r={};r.cardholder=a.cardholder,r.cardNo=a.cardNo,r.bankOfDeposit=a.bankOfDeposit,r.cardId=t.cardId,r.userId=t.$store.state.user.id,t.cardId?Object(f.c)(i()({},r)).then(function(){t.params.onSuccess&&t.params.onSuccess(),t.$router.go(-1)}).catch(function(t){return console.log(t)}):Object(f.a)(i()({},r)).then(function(){t.params.onSuccess&&t.params.onSuccess(),t.$router.go(-1)}).catch(function(t){return console.log(t)})}})},onGetName:function(t){var e=this;console.log("--------------555555"),console.log(t),console.log(this.form),this.form.data.forEach(function(a,r){console.log(a),"name"===a.attr&&(e.form.data[r].value=t,e.form.data[r].text=t)})},onMoreClick:function(){var t=!this.more;this.more=t,console.log(this.form.data[6].line),this.form.data[this.form.data.length-1].line=!t},getPage:function(t){var e=this;return o()(n.a.mark(function a(){var r,s,o,c,i,l,u,d,p,g,y,_;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(t),r=e.menu,s=r.followUpTarget,o=[],c=r.clueAdditionalConfiguration,i={selKey:1,colorList:[{name:"无",colors:{size:1,color:["",""]}}]},l={selKey:1,colorList:[{name:"无",colors:{size:1,color:["",""]}}]},u=r.clueIntentionType,d=r.clueShoppingWay,p=r.gender,g=r.customerType,a.next=13,Object(h.b)();case 13:return y=a.sent,a.next=16,Object(f.g)({userId:e.$store.state.user.id});case 16:_=a.sent,Object(f.e)().then(function(a){console.log(a,"=========================>success");var r=[];a.forEach(function(t){"work-edit-info"===t.code&&(r=t.fields)}),r.sort(function(t,e){return t.sort-e.sort}),console.log(r,"=========================>data");var n=[];r.forEach(function(a){var r={attr:a.attr,type:v.a[a.configsObj.type],title:a.name,text:null,value:null,placeholder:a.configsObj.placeholder,indent:!0,selData:{source:[],selectedKey:""}};_&&_.length>0&&("cardholder"===a.attr&&(r.text=_[0].cardholder,r.value=_[0].cardholder),"cardNo"===a.attr&&(r.text=_[0].encryptCardNo,r.value=_[0].encryptCardNo),"bankOfDeposit"===a.attr&&(r.text=_[0].bankOfDeposit,r.value=_[0].bankOfDeposit),e.cardId=_[0].id),t[r.attr]&&(r.text=t[r.attr],r.value=t[r.attr],"gender"===r.attr&&(r.text=t[r.attr].name,r.value=t[r.attr].code),"responsible"===r.attr&&(r.text=t[r.attr].name,r.value=t[r.attr].dingUserId),"origin"===r.attr&&(r.text=t[r.attr].name,r.value=t[r.attr].code),"type"===r.attr&&(r.text=t[r.attr].name,r.value=t[r.attr].code),"level"===r.attr&&(r.text=t[r.attr].code,r.value=t[r.attr].code),"industry"===r.attr&&(r.text=t[r.attr]),"area"===r.attr&&(r.text=t[r.attr].name,r.value=t[r.attr].code),"address"===r.attr&&(r.text=Object(x.d)(t[r.attr]),r.value=Object(x.d)(t[r.attr])),"remark"===r.attr&&(r.text=Object(x.d)(t[r.attr]),r.value=Object(x.d)(t[r.attr])));var m=!1;a.rulesObj&&a.rulesObj.forEach(function(t){"required"===t.type&&(m=!0)});var f=Object(b.a)(a);switch(m&&(r.required=m),f&&(r.rules=f),a.attr){case"target":r.selData.source=s.map(function(t){return{key:t.name,value:t.code}});break;case"purpose":r.selData.source=o;break;case"vehicleModelId":r.selData.source=c.map(function(t){return{key:t.name,value:t.code}});break;case"intentionType":case"intentionGrade":r.selData.source=u.map(function(t){return{key:t.name,value:t.code}});break;case"shoppingWay":r.selData.source=d.map(function(t){return{key:t.name,value:t.code}});break;case"appearance":r.selData=i;break;case"interior":r.selData=l;break;case"gender":r.selData.source=p.map(function(t){return{key:t.name,value:t.code}});break;case"origin":r.selData.source=y.map(function(t){return{key:t.name,value:t.code}});break;case"type":r.selData.source=g.map(function(t){return{key:t.name,value:t.code}})}n.push(r)}),e.form.data=n,e.form.more.data=[],console.log(e.form.data,"----------\x3e>>>>>>>>>"),e.initData=m()(e.form)}).catch(function(t){console.log(t,"==============================>err")});case 18:case"end":return a.stop()}},a,e)}))()}}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container app-init"},[a("div",{staticClass:"input-box2"},[a("cube-scroll",[a("Card",{attrs:{avatar:t.$store.state.user.avatar,name:t.$store.state.user.name,career:t.$store.state.user.position||"--",mobile:t.$store.state.user.mobile||"--",email:t.$store.state.user.email||"--",department:t.$store.state.user.departments[0].name||"--"}}),t._v(" "),t._l(t.form.data,function(e,r){return["customerId"===e.attr?a("div",{key:"index"+r,staticClass:"id-box"},t._l(t.form.info,function(e,r){return a("div",{key:"index2"+r,staticClass:"in-box",class:{self:50===e.columnWidth}},[a("yi-input",t._b({ref:"info",refInFor:!0,attrs:{value:e.value,indent:!0,selData:e.selData||null,clearMR:50===e.columnWidth,disable:!0},on:{"update:value":function(a){t.$set(e,"value",a)}},model:{value:e.text,callback:function(a){t.$set(e,"text",a)},expression:"item1.text"}},"yi-input",e,!1))],1)})):"groupHeader"===e.type?a("div",{key:"index"+r,staticClass:"section-title section-margin-top"},[t._v("\n          "+t._s(e.title)+"\n        ")]):a("div",{key:"index"+r,staticClass:"in-box",class:{self:50===e.columnWidth}},[a("yi-input",t._b({ref:"va",refInFor:!0,attrs:{value:e.value,indent:!0,selData:e.selData||null,clearMR:50===e.columnWidth},on:{"update:value":function(a){t.$set(e,"value",a)},"update:selData":function(a){t.$set(e,"selData || null",a)}},model:{value:e.text,callback:function(a){t.$set(e,"text",a)},expression:"item.text"}},"yi-input",e,!1))],1)]})],2)],1),t._v(" "),a("yi-btn-box",{attrs:{name:"确认修改银行卡信息"},on:{onBtnClick:t.onBtnClick}})],1)},staticRenderFns:[]};var D=a("VU/8")(k,C,!1,function(t){a("DZQ5")},"data-v-1b9d27a0",null);e.default=D.exports},DZQ5:function(t,e){},YFpM:function(t,e){}});
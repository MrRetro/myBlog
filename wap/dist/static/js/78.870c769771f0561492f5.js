webpackJsonp([78],{"7zlG":function(t,e){},jFkF:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("//Fk"),o=a.n(r),n=a("mvHQ"),c=a.n(n),l=a("Gtft"),i=a("OT9B"),u=a("t5DY"),s=a("1CjK"),f=a("3r8y"),d=a("I9E5"),p={name:"upload",extends:f.a,created:function(){var t=this;this.$nextTick(function(){t.getPage({})})},mounted:function(){l.a.setTitle({title:"合同资料"})},activated:function(){l.a.setRight()},data:function(){return{initData:null,form:{type:"add",data:[]}}},methods:{isEdit:function(){return this.initData!==c()(this.form)},cancelHandle:function(){},onImgsSuccess:function(){},onBtnClick:function(){var t=this,e=[];this.$refs.va.forEach(function(t){t.rules&&t.rules.required&&e.push(t.changeV())}),o.a.all(e).then(function(e){if(e.every(function(t){return t})){console.log(t.form,"校验成功并提交数据"),console.log(t.params),console.log(t.form);var a={};a.clueId=t.params.clueId,t.params.data.data.forEach(function(t){var e="";e=t.value?t.value:0===t.value?0:t.text,a[t.attr]=e}),t.form.data.forEach(function(t){var e="";e=t.value?t.value:0===t.value?0:t.text,"contractUrl"!==t.attr&&"certificateUrl"!==t.attr&&"depositVoucherUrl"!==t.attr||(e=e||[]),"orderNo"===t.attr&&(e=t.text+t.value),a[t.attr]=e});var r=!0;a.contractUrl&&a.contractUrl.forEach(function(t){t&&"string"!=typeof t&&(r=!1)}),a.certificateUrl&&a.certificateUrl.forEach(function(t){t&&"string"!=typeof t&&(r=!1)}),a.depositVoucherUrl&&a.depositVoucherUrl.forEach(function(t){t&&"string"!=typeof t&&(r=!1)}),!r&&t.$AlertUtil.showToast({txt:"您传的图片未成功，请重新选择图片",type:"warn"}),r&&Object(i.d)(a).then(function(e){console.log(e),e&&(d.a.showToast({txt:"签约成功"}),t.params.onSuccess&&t.params.onSuccess(),t.$router.go(-3))}).catch(function(t){return console.log(t,"==>err")})}})},getPage:function(t){var e=this;console.log(t);var a=this.menu,r=a.clueAdditionalConfiguration,o={selKey:1,colorList:[{name:"无",colors:{size:1,color:["",""]}}]},n={selKey:1,colorList:[{name:"无",colors:{size:1,color:["",""]}}]},l=a.clueIntentionType,f=a.clueShoppingWay,d=a.gender,p=a.customerOrigin,v=a.customerType;Object(i.j)().then(function(a){console.log(a,"=========================>success2");var i=[];a.forEach(function(t){console.log(t),"contact-add"===t.code&&"add"===e.form.type&&(i=t.fields),"contact-edit"===t.code&&"edit"===e.form.type&&(i=t.fields)}),i.sort(function(t,e){return t.sort-e.sort}),e.allData=i,console.log(i,"=========================>data2");var m=[];m=i.filter(function(t){return"step2"===t.description});var h=[];m.forEach(function(a){var c={attr:a.attr,type:s.a[a.configsObj.type],title:a.name,text:null,value:null,placeholder:a.configsObj.placeholder,indent:!0,columnWidth:a.columnWidth,selData:{source:[{key:"选项一",value:1},{key:"选项二",value:2}],selectedKey:"下单客户1"}};if("orderNo"===a.attr&&(console.log(e.params),e.params.storeSimpleDTO&&Object(u.p)({code:e.params.storeSimpleDTO.storeNo}).then(function(t){console.log(t,"res"),e.form.data.forEach(function(a,r){"orderNo"===a.attr&&(e.form.data[r].text=t.substring(0,8),e.form.data[r].value=t.substring(8,t.length),e.form.data[r].disable=!0)})}).catch(function(t){console.log(t,"err")})),"contractUrl"===c.attr&&(c.line=!1),"certificateUrl"===c.attr&&(c.line=!1),"depositVoucherUrl"===c.attr&&(c.line=!1),t[c.attr]){if(c.value=t[c.attr],c.text=t[c.attr],"gender"===c.attr&&(c.text=d[t[c.attr].code]&&d[t[c.attr].code].name,c.value=t[c.attr].code),"vehicleModelId"===c.attr&&(c.text=t[c.attr].carName,c.value=t[c.attr].vehicleModelId,getModelDetail(t[c.attr].vehicleModelId).then(function(t){return e.onCarModel({data:t})}).catch(function(t){return console.log(t)})),"appearance"===c.attr&&(c.text=JSON.parse(t[c.attr])&&JSON.parse(t[c.attr]).name,c.value=t[c.attr]?tranformColorsComponent(JSON.parse(t[c.attr])):null),"interior"===c.attr&&(c.text=JSON.parse(t[c.attr]).colors&&JSON.parse(t[c.attr]).colors[0].name,c.value=t[c.attr]?tranformColorsComponent(JSON.parse(t[c.attr])):null),"shoppingWay"===c.attr&&(c.text=t[c.attr].name,c.value=t[c.attr].code),"contractUrl"===c.attr){var i=c.value||[];c.value=i.map(function(t){return{url:t}})}if("certificateUrl"===c.attr){var m=c.value||[];c.value=m.map(function(t){return{url:t}})}if("depositVoucherUrl"===c.attr){var g=c.value||[];c.value=g.map(function(t){return{url:t}})}}var y=a.rulesObj[0]&&a.rulesObj[0].value,b={};a.rulesObj.length>0&&a.rulesObj.forEach(function(t){"required"===t.type?b[t.type]=t.value:"pattern"===t.type&&(b[t.value]=!0)});var k=b;switch(y&&(c.required=y),k&&(c.rules=k),a.attr){case"vehicleModelId":c.selData.source=r.map(function(t){return{key:t.name,value:t.code}});break;case"intentionType":case"intentionGrade":c.selData.source=l.map(function(t){return{key:t.name,value:t.code}});break;case"shoppingWay":c.selData.source=f.map(function(t){return{key:t.name,value:t.code}});break;case"appearance":c.selData=o;break;case"interior":c.selData=n;break;case"gender":c.selData.source=d.map(function(t){return{key:t.name,value:t.code}});break;case"origin":c.selData.source=p.map(function(t){return{key:t.name,value:t.code}});break;case"type":c.selData.source=v.map(function(t){return{key:t.name,value:t.code}})}h.push(c)}),e.form.data=h,console.log(e.form.data,"----------\x3e>>>>>>>>>"),e.initData=c()(e.form)}).catch(function(t){console.log(t,"==============================>err")})}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container app-init"},[a("div",{staticClass:"input-box2"},[a("cube-scroll",[t._l(t.form.data,function(e,r){return[a("yi-input",t._b({key:r,ref:"va",refInFor:!0,class:{hide:"orderNo"===e.attr},attrs:{value:e.value,indent:!0,selData:e.selData||null},on:{"update:value":function(a){t.$set(e,"value",a)}},model:{value:e.text,callback:function(a){t.$set(e,"text",a)},expression:"item.text"}},"yi-input",e,!1))]})],2)],1),t._v(" "),a("yi-btn-box",{attrs:{name:"确认提交"},on:{onBtnClick:t.onBtnClick}})],1)},staticRenderFns:[]};var m=a("VU/8")(p,v,!1,function(t){a("7zlG")},"data-v-148bffde",null);e.default=m.exports}});
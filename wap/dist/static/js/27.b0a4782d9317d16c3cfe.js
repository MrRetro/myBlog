webpackJsonp([27],{ejsh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("//Fk"),r=a.n(n),o=a("mvHQ"),c=a.n(o),i=a("o1Jv"),u=a("OT9B"),s=a("1CjK"),l=a("3r8y"),d=a("Gtft"),m=a("N6PA"),f=a("6D10"),v={name:"edit-info",extends:l.a,created:function(){var e=this;this.$nextTick(function(){e.params=e.$route.params;var t=e.params;t&&t.id?(e.id=t.id,e.form.type="edit"):e.form.type="add","add"===e.form.type?e.getPage({}):Object(i.c)(t.id).then(function(t){e.edit=t,console.log(t,"--------------------0203"),e.getPage(t)}).catch(function(e){console.log(e)})})},activated:function(){d.a.setRight()},data:function(){return{initData:null,id:"",form:{type:"edit",data:[]}}},computed:{},methods:{isEdit:function(){return this.initData!==c()(this.form)},onBtnClick:function(){var e=this,t=[];this.$refs.va.forEach(function(e){e.rules&&!Object(f.j)(e)&&t.push(e.changeV())}),r.a.all(t).then(function(t){if(t.every(function(e){return e})){console.log(e.form,"校验成功并提交数据");var a={};e.form.data.forEach(function(e){if("group"!==e.attr){var t="";t=e.value?e.value:0===e.value?0:e.text,"area"===e.attr?a.area=t:a[e.attr]=t,"label"===e.attr&&(a[e.attr]=e.text)}}),a.id=e.id,"string"==typeof a.label&&(a.label=[a.label]),console.log(a,"==>items"),Object(i.a)(a).then(function(){e.params.onSuccess&&e.params.onSuccess(),e.$router.go(-1)}).catch(function(e){console.log(e)})}})},getPage:function(e){var t=this;console.log(e);var a=this.menu,n=a.clueAdditionalConfiguration,r={selKey:1,colorList:[{name:"无",colors:{size:1,color:["",""]}}]},o={selKey:1,colorList:[{name:"无",colors:{size:1,color:["",""]}}]},l=a.clueIntentionType,d=a.clueShoppingWay,v=a.gender,p=a.customerOrigin,b=a.agentCategory,g=a.agentType,y=a.agentLevel,k=a.ageRange,h=a.experience,D=a.identity,x=a.livingTime,j=a.agentCommunication,O=a.beingConsulted,C=a.interestedly,w=a.advantage,E=a.business,T=a.valueJudgment;Object(i.b)().then(function(a){console.log(a,"=========================>success");var i=[];a.forEach(function(e){"edit-agents"===e.code&&(i=e.fields)}),i.sort(function(e,t){return e.sort-t.sort}),console.log(i,"=========================>data");var L=[];i.forEach(function(t){var a={attr:t.attr,type:s.a[t.configsObj.type],title:t.name,text:null,value:null,placeholder:t.configsObj.placeholder,indent:!0,columnWidth:t.columnWidth,selData:{source:[],selectedKey:""}};["name","mobile","wechatAccount"].includes(t.attr)&&(a.disable=!0),e[a.attr]&&(a.value=e[a.attr],a.text=e[a.attr],"gender"===a.attr&&(a.text=v[e[a.attr].code]&&v[e[a.attr].code].name,a.value=e[a.attr].code),"category"===a.attr&&(a.text=b[e[a.attr].code]&&b[e[a.attr].code].name,a.value=e[a.attr].code),"label"===a.attr&&(a.text=e.label,a.value=e.label),"type"===a.attr&&(a.text=g[e[a.attr].code]&&g[e[a.attr].code].name,a.value=e[a.attr].code),"responsible"===a.attr&&(a.text=e.responsible.name,a.value=e.responsible.dingUserId),"area"===a.attr&&(a.text=e[a.attr].name,a.value=e[a.attr].code),"remark"===a.attr&&(a.text=Object(f.d)(e[a.attr]),a.value=Object(f.d)(e[a.attr])),["storeAddress","wechatAccount"].includes(a.attr)&&(a.text=e[a.attr],a.value=e[a.attr]),["ageRange","experience","identity","livingTime","communication","beingConsulted","interestedly","advantage","business","valueJudgment","level"].includes(a.attr)&&(a.text=e[a.attr].name,a.value=e[a.attr].code));var c=!1;t.rulesObj&&t.rulesObj.forEach(function(e){"required"===e.type&&(c=!0)});var i=Object(m.a)(t);switch(c&&(a.required=c),i&&(a.rules=i),t.attr){case"category":a.selData.source=b.map(function(e){return{key:e.name,value:e.code}});break;case"type":a.selData.source=g.map(function(e){return{key:e.name,value:e.code}});break;case"vehicleModelId":a.selData.source=n.map(function(e){return{key:e.name,value:e.code}});break;case"intentionType":case"intentionGrade":a.selData.source=l.map(function(e){return{key:e.name,value:e.code}});break;case"shoppingWay":a.selData.source=d.map(function(e){return{key:e.name,value:e.code}});break;case"appearance":a.selData=r;break;case"interior":a.selData=o;break;case"gender":a.selData.source=v.map(function(e){return{key:e.name,value:e.code}});break;case"origin":a.selData.source=p.map(function(e){return{key:e.name,value:e.code}});break;case"ageRange":a.selData.source=k.map(function(e){return{key:e.name,value:e.code}});break;case"experience":a.selData.source=h.map(function(e){return{key:e.name,value:e.code}});break;case"identity":a.selData.source=D.map(function(e){return{key:e.name,value:e.code}});break;case"livingTime":a.selData.source=x.map(function(e){return{key:e.name,value:e.code}});break;case"communication":a.selData.source=j.map(function(e){return{key:e.name,value:e.code}});break;case"beingConsulted":a.selData.source=O.map(function(e){return{key:e.name,value:e.code}});break;case"interestedly":a.selData.source=C.map(function(e){return{key:e.name,value:e.code}});break;case"advantage":a.selData.source=w.map(function(e){return{key:e.name,value:e.code}});break;case"business":a.selData.source=E.map(function(e){return{key:e.name,value:e.code}});break;case"valueJudgment":a.selData.source=T.map(function(e){return{key:e.name,value:e.code}});break;case"level":a.selData.source=y.map(function(e){return{key:e.name,value:e.code}})}L.push(a)}),t.form.data=L,console.log(t.form.data,"----------\x3e>>>>>>>>>"),Object(u.h)({type:"agent",category:"agentLabel"}).then(function(e){var a=e.map(function(e){return{key:e.description,value:e.description}});t.form.data.forEach(function(e,n){"label"===e.attr&&(t.form.data[n].selData.source=a)}),t.initData=c()(t.form)}).catch(function(e){return console.log(e)})}).catch(function(e){console.log(e,"==============================>err")})},onLabelSuccess:function(e){var t=this;this.form.data.forEach(function(a,n){"label"===a.attr&&(t.form.data[n].text=e,t.form.data[n].value=e)}),this.initData=c()(this.form)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"input-box2"},[a("cube-scroll",[a("div",{staticClass:"content"},[e._l(e.form.data,function(t,n){return[a("div",{key:"index"+n,staticClass:"in-box",class:{self:50===t.columnWidth}},[a("yi-input",e._b({ref:"va",refInFor:!0,attrs:{value:t.value,indent:!0,selData:t.selData||null,clearMR:50===t.columnWidth&&"gender"!==t.attr},on:{"update:value":function(a){e.$set(t,"value",a)},onLabelSuccess:e.onLabelSuccess},model:{value:t.text,callback:function(a){e.$set(t,"text",a)},expression:"item.text"}},"yi-input",t,!1))],1)]}),e._v(" "),a("div",{staticClass:"space-box"})],2)])],1),e._v(" "),a("yi-btn-box",{attrs:{name:"确认提交"},on:{onBtnClick:e.onBtnClick}})],1)},staticRenderFns:[]};var b=a("VU/8")(v,p,!1,function(e){a("lPvM")},"data-v-29b3bb4a",null);t.default=b.exports},lPvM:function(e,t){},o1Jv:function(e,t,a){"use strict";a.d(t,"a",function(){return m}),a.d(t,"c",function(){return f}),a.d(t,"d",function(){return v}),a.d(t,"b",function(){return p}),a.d(t,"e",function(){return b});var n=a("//Fk"),r=a.n(n),o=a("Dd8w"),c=a.n(o),i=a("+6Bu"),u=a.n(i),s=a("vLgD"),l=a("2uFj"),d=a("oZzd"),m=function(e){var t=e.id,a=e.address,n=e.area,r=e.gender,o=e.industry,i=e.label,d=e.level,m=e.mobile,f=e.name,v=e.nickname,p=e.remark,b=e.responsible,g=e.type,y=u()(e,["id","address","area","gender","industry","label","level","mobile","name","nickname","remark","responsible","type"]);return Object(s.a)({url:l.e+"/wap/agents/"+t,method:"PUT",data:c()({address:a,area:n,gender:r,industry:o,label:i,level:d,mobile:m,name:f,nickname:v,remark:p,responsible:b,type:g},y)})},f=function(e){return Object(s.a)({url:l.e+"/wap/agents/"+e+"/get",method:"GET"})},v=function(e){var t=e.id,a=e.reason;return Object(s.a)({url:l.e+"/wap/agents/"+t+"/abandon",method:"put",data:{description:a}})},p=function(){if(d.a["wap-agent"])return r.a.resolve(d.a["wap-agent"])},b=function(e){var t=e.id,a=e.code;return Object(s.a)({url:l.e+"/wap/agents/"+t+"/"+a+"/appointArea",method:"put"})}}});